/*
C sort
显然分析了一大堆性质之后我还是不会
所以紫砂
*/
#include<bits/stdc++.h>
using namespace std;
int main()
{
    freopen("sort.in","r",stdin);
    freopen("sort.out","w",stdout);
    //避免文件错误的下下策
    return 0;
}
/*
# 2023-10-04

那天，有个人发现虚拟机里面原来是有VScode的。

这场的暴力怎么这么难打，有点被恶心到。

## T1 match

看这道题，简单思考会发现部分分里面 $k=1$ 和 $p=2$ 的非常好解决。

$k=1$ 显然只有一组，这不用多说。

$p=2$ 就直接输出所有的对，因为 $p=2$ 的时候可以忽略条件。

剩下还有个 $k=2$ 摆着，能够搞出 $k=2$ 想必就离正解不远了。

假设我们现在 $p=3,k=2$，尝试手模答案？

发现比较神奇的东西，我们一开始可以把 $p^2$ 分成连续的 $p$ 组，然后就可以在此基础上分出额外的 $p^2$ 组。

但这到了极限吗？到了。

在 $k=2$ 的时候这已经是极限了，每个数都和其它数有染了，自然不可能再凑出任何一对。

那此时我们如果继续加大 $k$？

没错，这是个同样的过程！在 $3^3$ 的分组中，我们第一次分出 $9$ 组，第二次对这 $9$ 组分成 $3$ 组，其中每一组都有 $9$ 种分法！

所以，这是个乘法原理的过程？基本上思路是这样的，需要分治等等，最后的构造貌似细节很多，但是规律还是比较显然。

显然数据给的不大就是让乱做也能A，这道题晚些好好琢磨细节就好了。

## T2 trans

虽然，但是 $1 \le n,m \le 100$ 是……？

还有 $k \le 10^9$ 又是……？

说到底我最疑惑的还是数据随机生成，这是必要的吧？

那这玩意儿有什么用呢？

真是不知道，但是有40pts的暴力。

第一档 $n=2$ 有无数种方法搞，pass。

第二档 $n=9,m=4/n=12,m=3$ 搜就完了。

第三档 $diff_i=1,same_i=0$ 其实是要所有边两边点的颜色都不同，由于点数少，暴力统计 $i$ 种颜色的情况有多少合法方案，剪剪枝没道理不过。

共计40pts，能搞，xdm冲！

## T3 sort

仔细分析这玩意儿怎么搞。

发现对于栈 $S_2$ 和序列 $b$ 而言，$S_2$ 起的是动态插入的作用，也就是从 $S_1$ 可以往 $b$ 里面的任何位置进行插入。

当然，这个东西起了作用但是不是完全的，因为当你把元素放入 $b$ 之后就是不可更改的，也就意味着插入一段元素之后就不能再往这段元素右边插入了。

仔细思考发现我们一开始是个排列，这意味着在插入之前，我们右边必须是有序且连续的一段。

因为其实 $S_1$ 是强制递减的，不难想到插入进来的序列也是递减的（从 $b$ 的角度来看就是递增的）。

那么这也就意味着，如果我们一定只能先插入小元素再插入大元素的时候，是不合法的。

比如找到的一个不合法的案例 $3，1，4，2$，我们想要插入 $3$ 之前 $2$ 和 $1$ 已经逆序了。

所以，怎样才会有必须先插入小元素再插入大元素的情况呢？

## T4 match

这道题直接推暴力，会发现 $\mathcal{O}(n^2)$ 的暴力居然被出题人卡到只有30pts？真够不要脸的。

到时候给我来个第三档乱出的把出题人马扬了。

那么 $\mathcal{O}(n^2)$ 的暴力怎么打呢？

发现我们的模糊匹配其实是要求前后有足够长的部分完全一致。

那么我们考虑在前面匹配一波，在后面匹配一波，这个时候就找到了两端。

时间复杂度 $\mathcal{O}(n^2)$，还是很简单的。

那么我们能不能进一步看看这道题？感觉能冲。

由于我们的模糊匹配定义在同长度的字符串之间，所以连续子串可以靠枚举的。

然后发现这东西有二分单调性，我们没准可以字符串哈希……

不是，你等我想想哈……

对对对，我们上面那个 $n^2$ 有问题，还有一个 $q$ 呢。

仔细想想发现上面那个其实是 $\mathcal{O}(|S|u)$ 的，用二分也不会好，毕竟有一个 $\mathcal{O}(nq)$ 的上限在那里。

那既然一定要看 $u$，为什么不能是多模呢？

AC自动机：啥事儿？

那么我们思考模糊匹配在AC自动机上会是什么样子？

这道题大概这样就解决了，但是不得不说这一部分会有点棘手。

借助前面的思想，我们正着倒着都来一遍。

实际上第一次正着走过之后我们可以利用这些信息，比如某次走到某位置的时候其实完全可以在这里记录一下，对应到另一个AC自动机上是到达过对应的节点时我们统计答案。

由于AC自动机是顺序性的，这样做……貌似可以！！

那其实很不好说了，因为AC自动机考场上我应该打不出来（大悲）……
*/

//避免.md文件被吞掉的下下策